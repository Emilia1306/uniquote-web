<div class="grid gap-6 pt-8">
  <!-- Encabezado -->
  <div>
    <h2 class="text-3xl font-bold text-[color:var(--brand)] mb-1">{{ titulo }}</h2>
    <p class="text-zinc-500">{{ subtitulo }}</p>
  </div>

  <!-- KPIs -->

  <!-- KPIs con Skeletons -->
  <section class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
    <ng-container *ngIf="loading()">
      <div *ngFor="let i of [1,2,3,4]"
        class="bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm h-32 flex flex-col justify-between">
        <div class="flex items-center gap-3">
          <ui-skeleton width="40px" height="40px" borderRadius="10px"></ui-skeleton>
          <ui-skeleton width="60%" height="16px"></ui-skeleton>
        </div>
        <ui-skeleton width="40%" height="28px"></ui-skeleton>
      </div>
    </ng-container>

    <ng-container *ngIf="!loading()">
      <div *ngFor="let k of kpis()"
        class="bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm hover:shadow-md transition-shadow">
        <div class="flex items-center gap-3 mb-2">
          <div class="h-10 w-10 rounded-lg grid place-items-center" [ngClass]="k.bgClass">
            <ng-icon [name]="k.icon" [class]="k.iconClass"></ng-icon>
          </div>
          <div class="text-sm text-zinc-500 font-medium">{{ k.label }}</div>
        </div>
        <div class="text-2xl font-bold">{{ k.value | number }}</div>
      </div>
    </ng-container>
  </section>

  <!-- Gráficas -->
  <!-- Gráficas -->
  <!-- Gráficas -->
  <section class="grid gap-4 lg:grid-cols-2">
    <!-- Chart 1 Placeholder -->
    <div *ngIf="loading()"
      class="bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm h-[320px] flex flex-col gap-4">
      <ui-skeleton width="40%" height="20px"></ui-skeleton>
      <ui-skeleton width="100%" height="100%" borderRadius="12px"></ui-skeleton>
    </div>

    <!-- Chart 1 Content -->
    <div *ngIf="!loading()" class="bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm">
      <div class="font-semibold mb-3">Cotizaciones vs Aprobadas (últimos 6 meses)</div>
      <apx-chart [series]="lineSeries()" [chart]="lineChart" [xaxis]="lineXAxis()" [yaxis]="lineYAxis"
        [stroke]="lineStroke" [markers]="lineMarkers" [grid]="lineGrid" [legend]="lineLegend" [tooltip]="lineTooltip"
        [dataLabels]="lineDataLabels" [colors]="lineColors" [fill]="lineFill">
      </apx-chart>
    </div>

    <!-- Chart 2 Placeholder -->
    <div *ngIf="loading()"
      class="bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm h-[320px] flex flex-col gap-4">
      <ui-skeleton width="40%" height="20px"></ui-skeleton>
      <ui-skeleton width="100%" height="100%" borderRadius="12px"></ui-skeleton>
    </div>

    <!-- Chart 2 Content -->
    <div *ngIf="!loading()" class="bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm">
      <div class="font-semibold mb-3">Actividad semanal (cotizaciones por día)</div>
      <apx-chart [series]="barSeries()" [chart]="barChart" [xaxis]="barXAxis()" [yaxis]="barYAxis" [grid]="barGrid"
        [plotOptions]="barPlot" [dataLabels]="barDataLabels" [colors]="barColors" [fill]="barFill"
        [tooltip]="barTooltip">
      </apx-chart>
    </div>
  </section>

  <section class="bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm">
    <div class="text-xs text-zinc-500">
      Total aprobadas en 6 meses: <b>{{ totalAprobadas() | number }}</b>
    </div>
  </section>
</div>